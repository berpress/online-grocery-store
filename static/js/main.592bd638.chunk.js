(this["webpackJsonponline-grocery-store"]=this["webpackJsonponline-grocery-store"]||[]).push([[0],{15:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(9),s=n.n(a),o=(n(15),n(4)),i=n.n(o),u=n(5),l=n(3),d="https://stores-tests-api.herokuapp.com",j=n(0);function b(){var e=Object(r.useState)(0),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){function e(){return(e=Object(u.a)(i.a.mark((function e(){var t,n,r,a,s,o,u,l,j,b,p,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Date.now(),"_admin.com"),"Password11",console.log(t),n={username:t,password:"Password11"},e.next=6,fetch("".concat(d,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return r=e.sent,e.next=9,r.json();case 9:return a=e.sent,s=a.uuid,console.log("Get ".concat(s)),e.next=14,fetch("".concat(d,"/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 14:return o=e.sent,e.next=17,o.json();case 17:return u=e.sent,l=u.access_token,console.log("Get token ".concat(l)),j={balance:1e4},e.next=23,fetch("".concat(d,"/balance/").concat(s),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(l)},body:JSON.stringify(j)});case 23:return b=e.sent,e.next=26,b.json();case 26:p=e.sent,h=p.balance,console.log("Balance is ".concat(h)),c(h);case 30:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(j.jsx)("nav",{className:"darken-1",children:Object(j.jsxs)("div",{className:"nav-wrapper",children:[Object(j.jsx)("a",{href:"/",className:"brand-logo",children:"Products Shop"}),Object(j.jsxs)("ul",{id:"nav-mobile",className:"right hide-on-med-and-down",children:[Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"https://github.com/berpress",target:"_blank",rel:"noreferrer",children:"GitHub"})}),Object(j.jsx)("li",{children:Object(j.jsxs)("a",{href:"https://github.com/berpress",target:"_blank",rel:"noreferrer",children:["Balance is ",n]})}),Object(j.jsx)("li",{children:Object(j.jsx)("a",{href:"https://github.com/berpress",target:"_blank",rel:"noreferrer",children:"Login"})})]})]})})}function p(){return Object(j.jsx)("footer",{className:"page-footer lighten-4",children:Object(j.jsx)("div",{className:"footer-copyright",children:Object(j.jsxs)("div",{className:"container",children:["\xa9 ",(new Date).getFullYear()," Copyright Text",Object(j.jsx)("a",{className:"grey-text text-lighten-4 right",href:"https://github.com/berpress",rel:"noreferrer",target:"_blank",children:"Repo"})]})})})}var h=n(10),m=n(2);function O(){return Object(j.jsx)("div",{className:"progress",children:Object(j.jsx)("div",{className:"indeterminate"})})}function f(e){var t=e.description,n=e.image,r=e.price,c=e.itemID,a=e.name,s=e.addToBasket,o=void 0===s?Function.prototype:s;return Object(j.jsxs)("div",{className:"card",children:[Object(j.jsx)("div",{className:"card-image",children:Object(j.jsx)("img",{src:n,alt:a})}),Object(j.jsxs)("div",{className:"card-content",children:[Object(j.jsx)("span",{className:"card-title",children:a}),Object(j.jsx)("p",{children:t})]}),Object(j.jsxs)("div",{className:"card-action",children:[Object(j.jsx)("button",{className:"btn",onClick:function(){return o({itemID:c,name:a,price:r})},children:"Buy"}),Object(j.jsxs)("span",{className:"right",style:{fontSize:"1.8rem"},children:[r," \u20bd"]})]})]})}var g=function(){var e=Object(u.a)(i.a.mark((function e(t,n){var r,c,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(d,"/store/").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(n)}});case 2:return r=e.sent,e.next=5,r.json();case 5:return c=e.sent,a=c.uuid,console.log("store ".concat(t," was add, uuid is ").concat(a)),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(i.a.mark((function e(t,n,r,c,a,s){var o,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={description:n,price:r,store_id:c,image:a},e.next=3,fetch("".concat(d,"/item/").concat(t),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"JWT ".concat(s)},body:JSON.stringify(o)});case 3:return u=e.sent,e.next=6,u.json();case 6:console.log("item ".concat(t," was add"));case 7:case"end":return e.stop()}}),e)})));return function(t,n,r,c,a,s){return e.apply(this,arguments)}}();function v(e){var t=e.goods,n=void 0===t?[]:t,r=e.addToBasket,c=void 0===r?Function.prototype:r,a=e.removeFromBasket,s=void 0===a?Function.prototype:a,o=function(){var e=Object(u.a)(i.a.mark((function e(){var t,n,r,c,a,s,o,u,l,j,b,p,h;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(Date.now(),"_admin.com"),"Password11",console.log(t),n={username:t,password:"Password11"},e.next=6,fetch("".concat(d,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 6:return r=e.sent,e.next=9,r.json();case 9:return c=e.sent,a=c.uuid,console.log("Get ".concat(a)),e.next=14,fetch("".concat(d,"/auth"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 14:return s=e.sent,e.next=17,s.json();case 17:return o=e.sent,u=o.access_token,console.log("Get token ".concat(u)),e.next=22,g("vegetables",u);case 22:return l=e.sent,e.next=25,g("fruits",u);case 25:return j=e.sent,e.next=28,g("waters",u);case 28:return b=e.sent,e.next=31,g("sweets",u);case 31:return p=e.sent,e.next=34,g("bakery",u);case 34:return h=e.sent,e.next=37,x("bananas","Delicious Brazilian bananas, 1 kg.",99,j,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/bananes.jpg?raw=true",u);case 37:return e.next=39,x("apples","Delicious red apples, 1 kg.",112,j,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/apples.jpg?raw=true",u);case 39:return e.next=41,x("tomate","Fresh tomatoes, 1 kg.",38,l,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/tomate.jpg?raw=true",u);case 41:return e.next=43,x("potatoes","Russian potatoes, 2 kg.",20,l,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/potatoes.jpg?raw=true",u);case 43:return e.next=45,x("pepsi","Pepsi 1L",38,b,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/Pepsi.jpg?raw=true",u);case 45:return e.next=47,x("juice Orange","Orange juice, 750 ml.",111,b,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/orange.jpg?raw=true",u);case 47:return e.next=49,x("Vanilla ice cream","Vanilla ice cream, 150 gr.",47,p,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/icecream.png?raw=true",u);case 49:return e.next=51,x("Chocolate","Black chocolate, 100 gr.",214,p,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/chocolate.jpg?raw=true",u);case 51:return e.next=53,x("Bread","White bread, 340 gr.",47,h,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/bread.jpg?raw=true",u);case 53:return e.next=55,x("Cake","Cake, 75 gr.",99,h,"https://github.com/berpress/online-grocery-store/blob/main/images_shop/cake.jpeg?raw=true",u);case 55:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.length?Object(j.jsx)("div",{className:"goods",children:n.map((function(e){return Object(j.jsx)(f,Object(m.a)(Object(m.a)({},e),{},{addToBasket:c,removeFromBasket:s}),e.itemID)}))}):Object(j.jsxs)("div",{children:[Object(j.jsx)("h3",{children:"Nothing here, see github"}),Object(j.jsx)("a",{href:"https://github.com/berpress/flask-restful-api",children:"Rest API"})," and",Object(j.jsx)("a",{href:"https://github.com/berpress/online-grocery-store",children:" Front "}),"or prepare data with API requests:",Object(j.jsx)("button",{onClick:o,children:"Prepere data"})]})}function y(e){var t=e.quantity,n=void 0===t?0:t,r=e.handleBasketShow,c=void 0===r?Function.prototype:r;return Object(j.jsxs)("div",{className:"cart red darken-4 white-text",onClick:c,children:[Object(j.jsx)("i",{className:"material-icons",children:"shopping_cart"}),n?Object(j.jsx)("span",{className:"cart-quantity",children:n}):null]})}function k(e){var t=e.itemID,n=e.name,r=e.price,c=e.quantity,a=e.removeFromBasket,s=void 0===a?Function.prototype:a,o=e.incQuantity,i=void 0===o?Function.prototype:o,u=e.decQuantity,l=void 0===u?Function.prototype:u;return Object(j.jsxs)("li",{className:"collection-item",children:[n," ",Object(j.jsx)("i",{className:"material-icons basket-quantity",onClick:function(){return l(t)},children:"remove"})," ","x",c," ",Object(j.jsx)("i",{className:"material-icons basket-quantity",onClick:function(){return i(t)},children:"add"})," ","= ",r*c," \u0440\u0443\u0431.",Object(j.jsx)("span",{className:"secondary-content",onClick:function(){return s(t)},children:Object(j.jsx)("i",{className:"material-icons basket-delete",children:"close"})})]})}function N(e){var t=e.order,n=void 0===t?[]:t,r=e.handleBasketShow,c=void 0===r?Function.prototype:r,a=e.removeFromBasket,s=void 0===a?Function.prototype:a,o=e.setOrderZero,i=void 0===o?Function.prototype:o,u=e.incQuantity,l=e.decQuantity,d=n.reduce((function(e,t){return e+t.price*t.quantity}),0);return Object(j.jsxs)("ui",{className:"collection basket-list",children:[Object(j.jsx)("li",{className:"collection-item active",children:"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"}),n.length?n.map((function(e){return Object(j.jsx)(k,Object(m.a)(Object(m.a)({incQuantity:u,decQuantity:l},e),{},{removeFromBasket:s}),e.itemID)})):Object(j.jsx)("li",{className:"collection-item",children:"Cart is Empty"}),Object(j.jsxs)("li",{className:"collection-item active",children:["Total price: ",d," \u20bd "]}),Object(j.jsx)("i",{className:"material-icons basket-close",onClick:c,children:"close"}),Object(j.jsx)("li",{className:"collection-item",children:Object(j.jsx)("button",{className:"btn red btn-small",onClick:i,children:"Buy"})})]})}function w(e){var t=e.updateGoods,n=void 0===t?Function.prototype:t,c=Object(r.useState)(""),a=Object(l.a)(c,2),s=a[0],o=a[1];return Object(j.jsxs)("div",{className:"input-field",children:[Object(j.jsx)("input",{placeholder:"Search product",id:"email_inline",type:"search",className:"validate",value:s,onChange:function(e){return o(e.target.value)}}),Object(j.jsx)("button",{className:"btn search-btn",onClick:function(){return n(s)},children:"Search"})]})}function S(e){var t=e.name,n=void 0===t?"":t,c=e.closeAlert,a=void 0===c?Function.prototype:c;return Object(r.useEffect)((function(){var e=setTimeout(a,5e3);return function(){clearTimeout(e)}}),[n]),Object(j.jsx)("div",{id:"toast-container",children:Object(j.jsxs)("div",{className:"toast",children:[n," add to cart"]})})}function T(e){var t=e.closeAlert,n=void 0===t?Function.prototype:t;return Object(r.useEffect)((function(){var e=setTimeout(n,7e3);return function(){clearTimeout(e)}}),[name]),Object(j.jsx)("div",{id:"toast-container",children:Object(j.jsx)("div",{className:"toast",children:"Pay done!"})})}function B(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(!0),s=Object(l.a)(a,2),o=s[0],i=s[1],u=Object(r.useState)([]),b=Object(l.a)(u,2),p=b[0],f=b[1],g=Object(r.useState)(!1),x=Object(l.a)(g,2),k=x[0],B=x[1],C=Object(r.useState)(""),F=Object(l.a)(C,2),_=F[0],P=F[1],q=Object(r.useState)(""),D=Object(l.a)(q,2),I=D[0],J=D[1];Object(r.useEffect)((function(){fetch("".concat(d,"/items"),{}).then((function(e){return e.json()})).then((function(e){e&&c(e.items),i(!1)}))}),[]);var A=function(){B(!k)};return Object(j.jsxs)("main",{className:"container content",children:[Object(j.jsx)(w,{goods:n,updateGoods:function(e){var t=n.filter((function(t){return e===t.name}));c(t)}}),Object(j.jsx)(y,{quantity:p.length,handleBasketShow:A}),o?Object(j.jsx)(O,{}):Object(j.jsx)(v,{goods:n,addToBasket:function(e){console.log(p);var t=p.findIndex((function(t){return t.itemID===e.itemID}));if(t<0){var n=Object(m.a)(Object(m.a)({},e),{},{quantity:1});f([].concat(Object(h.a)(p),[n]))}else{var r=p.map((function(e,n){return n===t?Object(m.a)(Object(m.a)({},e),{},{quantity:e.quantity+1}):e}));f(r)}P(e.name)}}),k&&Object(j.jsx)(N,{order:p,handleBasketShow:A,removeFromBasket:function(e){var t=p.filter((function(t){return t.itemID!==e}));f(t)},incQuantity:function(e){var t=p.map((function(t){if(t.itemID===e){var n=t.quantity+1;return Object(m.a)(Object(m.a)({},t),{},{quantity:n})}return t}));f(t)},decQuantity:function(e){var t=p.map((function(t){if(t.itemID===e){var n=t.quantity-1;return Object(m.a)(Object(m.a)({},t),{},{quantity:n>=0?n:0})}return t}));f(t)},setOrderZero:function(){f([]),J("buy")}}),_&&Object(j.jsx)(S,{name:_,closeAlert:function(){P("")}}),I&&Object(j.jsx)(T,{closeAlert:function(e){J(e)},name:I})]})}var C=function(){return Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(b,{}),Object(j.jsx)(B,{}),Object(j.jsx)(p,{})]})};s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(C,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.592bd638.chunk.js.map